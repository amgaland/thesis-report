%!TEX TS-program = xelatex
%!TEX encoding = UTF-8 Unicode
\documentclass[12pt,a4paper]{report}

\usepackage{fontspec}
\setmainfont{Times New Roman}
\setsansfont{Arial}

\usepackage[mongolian]{babel} % Enable Mongolian hyphenation
\renewcommand{\contentsname}{Гарчиг} % Fix for table of contents title
\usepackage{geometry}
\usepackage{fancyhdr}
\usepackage{float}
\usepackage{graphicx}
\usepackage{amsmath,amssymb}
\usepackage{dcolumn,array}
\usepackage{tocloft}
\usepackage{dics} % Custom style file
\usepackage{nomencl}
\usepackage{upgreek}
\usepackage{longtable} % For functional.tex
\usepackage{mathtools}
\usepackage[hidelinks]{hyperref}
\usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage{listings}
\usepackage{caption} % Modern caption package
\usepackage{subfiles}
\usepackage{color}

% Geometry: Match dics.sty
\geometry{a4paper,left=3cm,right=2cm,top=2.5cm,bottom=2cm}

% Fix fancyhdr warning
\setlength{\headheight}{15pt}

% Hyperref setup
\hypersetup{
    pdfencoding=auto,
    unicode=true
}

% Listings configuration (simplified)
\lstset{
    language=TypeScript,
    basicstyle=\footnotesize\ttfamily,
    numbers=left,
    numberstyle=\footnotesize,
    numbersep=9pt,
    breaklines=true,
    captionpos=b
}
\renewcommand{\lstlistingname}{Код}
\renewcommand{\lstlistlistingname}{\lstlistingname ын жагсаалт}

% Fix chapter for hyperref
\let\oldchapter\chapter
\renewcommand{\chapter}[1]{\oldchapter{\texorpdfstring{\uppercase{Бүлэг} \thechapter: #1}{Бүлэг \thechapter: #1}}}

% Fix table captions
\captionsetup[table]{name=Хүснэгт}

\begin{document}

% Metadata
\title{Бизнесийн байгууллагын ажилчдын гүйцэтгэлийг үнэлэх систем}
\author{Баянжаргалын Энх-Амгалан}
\maketitle

% Content
\subfile{src/main-pre}
\tableofcontents
\subfile{src/abstract}
\subfile{src/chapters/chapter}
\subfile{src/bibliography}
\subfile{src/appendix}

\end{document}